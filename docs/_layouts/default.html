<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>{% if page.title %}{{ page.title | escape }} | {% endif %}{{ site.title | escape }}</title>
  <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
  
  <link rel="stylesheet" href="{{ '/assets/main.css' | relative_url }}">
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">
  
  {% seo %}
  
  <style>
    /* CSS Variables for Theme Support */
    :root {
      /* Light theme colors */
      --bg-color: #ffffff;
      --text-color: #24292e;
      --header-bg: #2c3e50;
      --header-border: #3498db;
      --site-title-color: #ecf0f1;
      --site-title-hover: #3498db;
      --nav-link-color: #bdc3c7;
      --nav-link-hover: #3498db;
      --card-bg: #f8f9fa;
      --card-border: #dee2e6;
      --code-bg: #f8f9fa;
      --code-border: #e9ecef;
      --heading-color: #2c3e50;
      --link-color: #3498db;
      --footer-bg: #f8f9fa;
      --footer-border: #e9ecef;
    }

    /* Dark theme colors */
    [data-theme="dark"] {
      --bg-color: #0d1117;
      --text-color: #c9d1d9;
      --header-bg: #161b22;
      --header-border: #3498db;
      --site-title-color: #f0f6fc;
      --site-title-hover: #58a6ff;
      --nav-link-color: #8b949e;
      --nav-link-hover: #58a6ff;
      --card-bg: #21262d;
      --card-border: #30363d;
      --code-bg: #161b22;
      --code-border: #30363d;
      --heading-color: #f0f6fc;
      --link-color: #58a6ff;
      --footer-bg: #161b22;
      --footer-border: #30363d;
    }

    /* Apply theme colors to body */
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* Custom styles for λÆS documentation */
    .site-header {
      background-color: var(--header-bg);
      border-bottom: 3px solid var(--header-border);
    }
    
    .site-title {
      color: var(--site-title-color) !important;
      font-weight: bold;
      display: flex;
      align-items: center;
      text-decoration: none;
    }
    
    .site-title:hover {
      color: var(--site-title-hover) !important;
      text-decoration: none;
    }
    
    .site-nav .page-link {
      color: var(--nav-link-color);
    }
    
    .site-nav .page-link:hover {
      color: var(--nav-link-hover);
    }

    /* Theme toggle button */
    .theme-toggle {
      background: none;
      border: none;
      color: var(--nav-link-color);
      cursor: pointer;
      font-size: 1.2em;
      padding: 0.5rem;
      margin-left: 1rem;
      border-radius: 0.25rem;
      transition: color 0.3s ease, background-color 0.3s ease;
      display: inline-block;
      vertical-align: middle;
    }

    .theme-toggle:hover {
      color: var(--nav-link-hover);
      background-color: rgba(255, 255, 255, 0.1);
    }

    .theme-toggle:focus {
      outline: 2px solid var(--nav-link-hover);
      outline-offset: 2px;
    }

    /* Ensure navigation items stay on same line */
    .site-nav .trigger {
      display: flex;
      align-items: center;
      flex-wrap: nowrap;
    }

    .site-nav .page-link {
      white-space: nowrap;
      margin-right: 1rem;
    }

    /* Responsive navigation adjustments */
    @media screen and (max-width: 768px) {
      .site-nav .trigger {
        flex-wrap: wrap;
      }
      
      .theme-toggle {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    
    /* Syntax highlighting for light theme */
    .highlight {
      background-color: var(--code-bg);
      border: 1px solid var(--code-border);
      border-radius: 0.375rem;
      padding: 1rem;
      margin: 1rem 0;
    }

    /* Dark mode code block background override */
    [data-theme="dark"] .highlight {
      background-color: var(--code-bg) !important;
      border-color: var(--code-border) !important;
    }

    /* Also target Rouge's generated pre and code elements */
    [data-theme="dark"] pre.highlight {
      background-color: var(--code-bg) !important;
    }

    [data-theme="dark"] .highlighter-rouge .highlight {
      background-color: var(--code-bg) !important;
    }

    /* Inline code styling */
    code {
      background-color: var(--code-bg);
      border: 1px solid var(--code-border);
      border-radius: 0.25rem;
      padding: 0.125rem 0.25rem;
    }

    [data-theme="dark"] code {
      background-color: var(--code-bg) !important;
      border-color: var(--code-border) !important;
      color: var(--text-color);
    }

    /* Light theme syntax colors */
    .highlight .c { color: #6a737d; } /* Comment */
    .highlight .k { color: #d73a49; } /* Keyword */
    .highlight .kt { color: #d73a49; } /* Keyword.Type */
    .highlight .s { color: #032f62; } /* String */
    .highlight .s1 { color: #032f62; } /* String.Single */
    .highlight .s2 { color: #032f62; } /* String.Double */
    .highlight .nc { color: #6f42c1; } /* Name.Class */
    .highlight .nf { color: #6f42c1; } /* Name.Function */
    .highlight .n { color: #24292e; } /* Name */
    .highlight .o { color: #d73a49; } /* Operator */
    .highlight .p { color: #24292e; } /* Punctuation */
    .highlight .m { color: #005cc5; } /* Number */
    .highlight .mi { color: #005cc5; } /* Number.Integer */
    .highlight .mf { color: #005cc5; } /* Number.Float */

    /* Dark theme syntax colors */
    [data-theme="dark"] .highlight .c { color: #8b949e; } /* Comment */
    [data-theme="dark"] .highlight .k { color: #ff7b72; } /* Keyword */
    [data-theme="dark"] .highlight .kt { color: #ff7b72; } /* Keyword.Type */
    [data-theme="dark"] .highlight .s { color: #a5d6ff; } /* String */
    [data-theme="dark"] .highlight .s1 { color: #a5d6ff; } /* String.Single */
    [data-theme="dark"] .highlight .s2 { color: #a5d6ff; } /* String.Double */
    [data-theme="dark"] .highlight .nc { color: #d2a8ff; } /* Name.Class */
    [data-theme="dark"] .highlight .nf { color: #d2a8ff; } /* Name.Function */
    [data-theme="dark"] .highlight .n { color: #c9d1d9; } /* Name */
    [data-theme="dark"] .highlight .o { color: #ff7b72; } /* Operator */
    [data-theme="dark"] .highlight .p { color: #c9d1d9; } /* Punctuation */
    [data-theme="dark"] .highlight .m { color: #79c0ff; } /* Number */
    [data-theme="dark"] .highlight .mi { color: #79c0ff; } /* Number.Integer */
    [data-theme="dark"] .highlight .mf { color: #79c0ff; } /* Number.Float */

    /* Scala-specific syntax highlighting for light theme */
    .language-scala .k { color: #d73a49; } /* Keywords like val, def, class */
    .language-scala .s { color: #032f62; } /* Strings */
    .language-scala .nc { color: #6f42c1; } /* Class names */
    .language-scala .nf { color: #6f42c1; } /* Function names */
    .language-scala .kt { color: #d73a49; } /* Types like Int, String */

    /* Scala-specific syntax highlighting for dark theme */
    [data-theme="dark"] .language-scala .k { color: #ff7b72; } /* Keywords */
    [data-theme="dark"] .language-scala .s { color: #a5d6ff; } /* Strings */
    [data-theme="dark"] .language-scala .nc { color: #d2a8ff; } /* Class names */
    [data-theme="dark"] .language-scala .nf { color: #d2a8ff; } /* Function names */
    [data-theme="dark"] .language-scala .kt { color: #ff7b72; } /* Types */

    /* Layout styles */
    .effect-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
      margin: 2rem 0;
    }
    
    .effect-card {
      border: 1px solid var(--card-border);
      border-radius: 0.5rem;
      padding: 1.5rem;
      background-color: var(--card-bg);
    }
    
    .effect-card h3 {
      margin-top: 0;
      color: var(--heading-color);
    }

    /* Links */
    a {
      color: var(--link-color);
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
      color: var(--heading-color);
    }

    /* Footer */
    .site-footer {
      background-color: var(--footer-bg);
      border-top: 1px solid var(--footer-border);
    }
  </style>
</head>

<body>
  <header class="site-header" role="banner">
    <div class="wrapper">
      <a class="site-title" rel="author" href="{{ '/' | relative_url }}">
        <img src="{{ '/logo.svg' | relative_url }}" alt="λÆS Logo" style="height: 40px; vertical-align: middle; margin-right: 10px;">
        {{ site.title | escape }}
      </a>
      
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.484C18,14.303,17.335,14.969,16.516,14.969H1.484 C0.665,14.969,0,14.303,0,13.484l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.001,18,12.665,18,13.484L18,13.484z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <a class="page-link" href="{{ '/' | relative_url }}">Home</a>
          <a class="page-link" href="{{ '/getting-started.html' | relative_url }}">Getting Started</a>
          <a class="page-link" href="{{ '/effects/' | relative_url }}">Effects</a>
          <a class="page-link" href="{{ '/data-structures.html' | relative_url }}">Data Structures</a>
          <a class="page-link" href="{{ '/examples.html' | relative_url }}">Examples</a>
          <a class="page-link" href="{{ '/contributing.html' | relative_url }}">Contributing</a>
          <a class="page-link" href="https://github.com/rcardin/yaes">GitHub</a>
          <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">
            <span id="theme-toggle-icon">🌙</span>
          </button>
        </div>
      </nav>
    </div>
  </header>

  <main class="page-content" aria-label="Content">
    <div class="wrapper">
      {{ content }}
    </div>
  </main>

  <footer class="site-footer h-card">
    <data class="u-url" href="{{ '/' | relative_url }}"></data>
    <div class="wrapper">
      <div class="footer-col-wrapper">
        <div class="footer-col footer-col-1">
          <ul class="contact-list">
            <li class="p-name">λÆS - Yet Another Effect System</li>
            <li><a class="u-email" href="mailto:riccardo.cardin@gmail.com">riccardo.cardin@gmail.com</a></li>
          </ul>
        </div>
        <div class="footer-col footer-col-2">
          <ul class="social-media-list">
            <li>
              <a href="https://github.com/rcardin/yaes">
                <svg class="svg-icon"><use xlink:href="{{ '/assets/minima-social-icons.svg#github' | relative_url }}"></use></svg>
                <span class="username">rcardin/yaes</span>
              </a>
            </li>
          </ul>
        </div>
        <div class="footer-col footer-col-3">
          <p>{{ site.description | escape }}</p>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Theme switching functionality
    function initTheme() {
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = savedTheme || (prefersDark ? 'dark' : 'light');
      
      setTheme(theme);
    }

    function setTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      
      const icon = document.getElementById('theme-toggle-icon');
      if (icon) {
        icon.textContent = theme === 'dark' ? '☀️' : '🌙';
      }
      
      localStorage.setItem('theme', theme);
    }

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      setTheme(newTheme);
    }

    // Initialize theme when DOM is loaded
    document.addEventListener('DOMContentLoaded', initTheme);
    
    // Listen for system theme changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
      if (!localStorage.getItem('theme')) {
        setTheme(e.matches ? 'dark' : 'light');
      }
    });
  </script>
</body>
</html>
